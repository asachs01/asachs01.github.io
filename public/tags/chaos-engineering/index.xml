<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Chaos Engineering on Staring Blankly at a Screen</title><link>https://aaron.sachs.blog/tags/chaos-engineering/</link><description>Recent content in Chaos Engineering on Staring Blankly at a Screen</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Â© 2025 Aaron Sachs. All rights reserved.</copyright><lastBuildDate>Thu, 06 Jun 2019 10:31:40 +0000</lastBuildDate><atom:link href="https://aaron.sachs.blog/tags/chaos-engineering/index.xml" rel="self" type="application/rss+xml"/><item><title>Badass Monitoring, Pt 2: The 'Why'</title><link>https://aaron.sachs.blog/archive/sensu-gremlin-part-2/</link><pubDate>Thu, 06 Jun 2019 10:31:40 +0000</pubDate><guid>https://aaron.sachs.blog/archive/sensu-gremlin-part-2/</guid><description>&lt;h1 id="back-it-up">Back it up
&lt;/h1>&lt;p>Oh man, did I get ahead of myself in my [last post][1]. I started chatting tools, and I realize now that I really should have been talking more about why I&amp;rsquo;m using Sensu and Gremlin. But it didn&amp;rsquo;t occur to me until this past week at [Monitorama][2].&lt;/p>
&lt;p>[John Allspaw][3] gave the keynote talk (Taking Human Performance Seriously) this year. While you can watch the talk [here][4], I&amp;rsquo;ll highlight a few points here:&lt;/p>
&lt;ul>
&lt;li>People will pursue what they think will be productive, and won&amp;rsquo;t pursue that which they feel isn&amp;rsquo;t productive&lt;/li>
&lt;li>Monitoring &amp;amp; observability are inextricably linked with other activities&lt;/li>
&lt;li>Ask and develop better questions when doing incident analysis&lt;/li>
&lt;li>Disagreements are data&lt;/li>
&lt;li>Incidents are investments that your organization accidentally made&lt;/li>
&lt;/ul>
&lt;p>There are a ton of other great points that John makes. Please, take a few minutes and give it a listen.&lt;/p>
&lt;h1 id="what-does-it-mean-basil">What does it mean, Basil?
&lt;/h1>&lt;p>Ok, so what does all of that mean and what does it have to do with chaos engineering experiments and monitoring? Everything! When you consider what happens with an incident, the last thing anyone wants is more monitoring noise, or to be surprised by the information they receive. It&amp;rsquo;s not useful.&lt;/p>
&lt;p>The tools we use when making sense of an incident should provide us with information in such a way that our reasoning about and making inferences during an incident are better because of that information. Informational cruft (i.e., contextless, repeated, action-less alerts) ultimately do damage, or at the very least, don&amp;rsquo;t contribute to making sense of an incident.&lt;/p>
&lt;p>This is why I&amp;rsquo;m using Sensu and Gremlin&amp;ndash;to refine the tool that I use for monitoring so that the information I have is of high quality and is a useful part of my information gathering and sense-making processes.&lt;/p>
&lt;h1 id="oh-the-places-well-go">Oh the places we&amp;rsquo;ll go
&lt;/h1>&lt;p>The rest of this series is going to focus on this: making Sensu a high-quality information gathering and sense-making tool for incidents. Not that it isn&amp;rsquo;t already a great tool, but just slapping a status check on a group of boxen doesn&amp;rsquo;t ðŸ‘ make ðŸ‘ for ðŸ‘ useful ðŸ‘ monitoring! There&amp;rsquo;s more to metric gathering and status checks. So we&amp;rsquo;re going to work through that. We&amp;rsquo;ll go from the most minimal thing we can do (a status check) to an alert that provide us with high-quality information for future troubleshooting. We&amp;rsquo;ll use Gremlin along the way as the means of refining those alerts.&lt;/p>
&lt;p>Cheers,&lt;/p>
&lt;p>Aaron&lt;/p>
&lt;p>&lt;em>&lt;/em>
[1]: ../sensu-gremlin-intro/
[2]: &lt;a class="link" href="https://monitorama.com/2019/pdx.html" target="_blank" rel="noopener"
>https://monitorama.com/2019/pdx.html&lt;/a>&lt;br>
[3]: &lt;a class="link" href="https://twitter.com/allspaw" target="_blank" rel="noopener"
>https://twitter.com/allspaw&lt;/a>
[4]: &lt;a class="link" href="https://youtu.be/eZJoevaojyE?t=2497" target="_blank" rel="noopener"
>https://youtu.be/eZJoevaojyE?t=2497&lt;/a>&lt;/p></description></item><item><title>Badass Monitoring, Pt 1: Sensu &amp; Gremlin</title><link>https://aaron.sachs.blog/archive/sensu-gremlin-intro/</link><pubDate>Thu, 30 May 2019 09:03:24 -0500</pubDate><guid>https://aaron.sachs.blog/archive/sensu-gremlin-intro/</guid><description>&lt;p>One of my earliest jobs was as an admin for an MSP. We&amp;rsquo;d routinely generate alerts that weren&amp;rsquo;t actionable, lacked context, and for most of our customers, were considered noise. From a monitoring perspective, it was bad. Customers didn&amp;rsquo;t trust in the alerts they received and often resorted to having some additional monitoring product installed on their systems. It&amp;rsquo;s safe to say that our auto-generated tickets and emails were largely ignored.&lt;/p>
&lt;p>In an effort to avoid repeating mistakes of the past, I want to ensure that I have actionable alerts that are context heavy. Thankfully, there are a couple of tools that I&amp;rsquo;ve found go a long way in helping me with that effort: Sensu and Gremlin. I&amp;rsquo;ll do an intro to those tools today, and we&amp;rsquo;ll pick up on how these tools work together in the next post. It&amp;rsquo;s worth mentioning that I am a Sensu employee.&lt;/p>
&lt;p>With that out of the way, let&amp;rsquo;s get to the tools!&lt;/p>
&lt;h1 id="the-tools">&lt;strong>The Tools&lt;/strong>
&lt;/h1>&lt;h2 id="sensu">&lt;strong>Sensu&lt;/strong>
&lt;/h2>&lt;p>If you&amp;rsquo;ve not used &lt;a class="link" href="https://sensu.io" target="_blank" rel="noopener"
>Sensu&lt;/a> before, allow me to make a formal introduction. At Sensu, we talk about it as a &amp;ldquo;monitoring event pipeline.&amp;rdquo; The concept is similar to a CI/CD pipeline, except that instead of releasing software software, I&amp;rsquo;m sending monitoring event data. The goal with the pipeline being that by the time I receive a monitoring event or alert, I know beyond a shadow of a doubt that what I have in front of me has been verified and provides me with exactly what I need to act on the data.&lt;/p>
&lt;p>For this series, I&amp;rsquo;ll be using Sensu as my monitoring tool of choice.&lt;/p>
&lt;h2 id="gremlin">&lt;strong>Gremlin&lt;/strong>
&lt;/h2>&lt;p>If you&amp;rsquo;re in IT, you&amp;rsquo;re probably familiar with Gremlins.&lt;/p>
&lt;p>![gremlin gif][1]&lt;/p>
&lt;p>Yes, those ones. They&amp;rsquo;ve been known to cause many an issue, but in this case, I&amp;rsquo;m talking about this [Gremlin][2] in particular. Gremlin is a [chaos engineering][3] tool that allows you to run targeted attacks on your infrastructure. This can be anything from a time-drift attack to more complicated types of attacks. The goal here will be to apply the principles of chaos engineering to uncover any weaknesses in our Sensu deployment and ensure that it is able to withstand real-world conditions.&lt;/p>
&lt;p>We&amp;rsquo;ll also use Gremlin to introduce conditions that will generate Sensu alerts. By introducing those conditions, we&amp;rsquo;ll be able to ensure that the alerts generated follow the [CASE][4] method.&lt;/p>
&lt;h1 id="the-setup">&lt;strong>The Setup&lt;/strong>
&lt;/h1>&lt;h2 id="sensu-1">&lt;strong>Sensu&lt;/strong>
&lt;/h2>&lt;p>I&amp;rsquo;ve already set up Sensu in my own environment (which is Ubuntu 18.04), so I&amp;rsquo;m not going to walk through that here. However, if you don&amp;rsquo;t have a working Sensu deployment, you&amp;rsquo;ll want to checkout the [Sensu installation doc][5], so that you can get all of the various Sensu components installed. It&amp;rsquo;s worth noting that for some our later testing, we&amp;rsquo;ll be using a clustered deployment. For that, you&amp;rsquo;ll want to take a look at the [clustering doc][6].&lt;/p>
&lt;h2 id="gremlin-1">&lt;strong>Gremlin&lt;/strong>
&lt;/h2>&lt;p>Just like Sensu, we&amp;rsquo;ll need to install Gremlin&amp;rsquo;s agent so we can start &lt;del>doing pseudo-nefarious stuff&lt;/del> performing attacks on our test boxen. ðŸ˜ˆ In this case, since I&amp;rsquo;m using Ubuntu 18.04 as my test box of choice, I&amp;rsquo;ll also follow [Gremlin&amp;rsquo;s installation guide][7] for Ubuntu as well (though it&amp;rsquo;s for Ubuntu 16.04, this should still work in our case).&lt;/p>
&lt;h1 id="next-steps">Next Steps
&lt;/h1>&lt;p>Once you&amp;rsquo;ve got both Sensu and Gremlin installed, let&amp;rsquo;s run a couple of tests to make sure things are working like we expect them to.&lt;/p>
&lt;h2 id="sensu-2">Sensu
&lt;/h2>&lt;p>One of the cool things about Sensu is that you can monitor anything and you can have alerts generated from any number of things, not just the [community plugins][8] or [assets][8] Sensu offers. We can create some ad-hoc alerts using the [agent API][9] just to see what an alert might look like in our dashboard. To do that, run the following on your test VM:&lt;/p>
&lt;pre>&lt;code>curl -X POST \
-H 'Content-Type: application/json' \
-d '{
&amp;quot;check&amp;quot;: {
&amp;quot;metadata&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;mysql-backup-job&amp;quot;
},
&amp;quot;status&amp;quot;: 0,
&amp;quot;output&amp;quot;: &amp;quot;mysql backup initiated&amp;quot;,
&amp;quot;ttl&amp;quot;: 25200
}
}' \
http://127.0.0.1:3031/events
&lt;/code>&lt;/pre>
&lt;p>That command creates a mock event and sends it to the agent API. Now, this might be useful if I had some sort of code that monitored a mysql backup job and emitted this message. In our case, it&amp;rsquo;s just for us to make sure that we&amp;rsquo;ve set up and configured Sensu correctly. A successful test should leave you with an event that looks something like this:&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>BOOM! ðŸ’¥ Our test worked! Let&amp;rsquo;s just run a quick sample attack with Gremlin now.&lt;/p>
&lt;h2 id="gremlin-2">Gremlin
&lt;/h2>&lt;p>Just like we tested Sensu to make sure we&amp;rsquo;re able to receive events, we&amp;rsquo;re going to test our Gremlin agent. You can see me run the attack below:&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->Screen Recording 2019-06-14 at 03.25 PM.mov&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>There we have it! Both Sensu and Gremlin are working like we expect them to. In the next post, I&amp;rsquo;m going to dig a bit more into the &amp;ldquo;why&amp;rdquo; of using a chaos engineering tool like Gremlin to test monitoring tools like Sensu.&lt;/p>
&lt;p>&lt;em>&lt;/em>
[1]: &lt;a class="link" href="https://media.giphy.com/media/BqPljBK6V9ZPG/giphy.gif" target="_blank" rel="noopener"
>https://media.giphy.com/media/BqPljBK6V9ZPG/giphy.gif&lt;/a>
[2]: &lt;a class="link" href="https://www.gremlin.com/" target="_blank" rel="noopener"
>https://www.gremlin.com/&lt;/a>
[3]: &lt;a class="link" href="https://principlesofchaos.org/" target="_blank" rel="noopener"
>https://principlesofchaos.org/&lt;/a>
[4]: &lt;a class="link" href="http://onemogin.com/monitoring/case-method-better-monitoring-for-humans.html" target="_blank" rel="noopener"
>http://onemogin.com/monitoring/case-method-better-monitoring-for-humans.html&lt;/a>
[5]: &lt;a class="link" href="https://docs.sensu.io/sensu-go/5.9/installation/install-sensu/#install-the-sensu-backend" target="_blank" rel="noopener"
>https://docs.sensu.io/sensu-go/5.9/installation/install-sensu/#install-the-sensu-backend&lt;/a>
[6]: &lt;a class="link" href="https://docs.sensu.io/sensu-go/5.9/guides/clustering/" target="_blank" rel="noopener"
>https://docs.sensu.io/sensu-go/5.9/guides/clustering/&lt;/a>
[7]: &lt;a class="link" href="https://www.gremlin.com/community/tutorials/how-to-install-and-use-gremlin-on-ubuntu-16-04/" target="_blank" rel="noopener"
>https://www.gremlin.com/community/tutorials/how-to-install-and-use-gremlin-on-ubuntu-16-04/&lt;/a>&lt;/p></description></item></channel></rss>